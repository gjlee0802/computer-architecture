# ë©´ì ‘ ê¸°ì¶œ ì˜ˆì‹œ
* ì™¸ë¶€ì—ì„œ ìˆ˜ì§‘í•œ ìë£Œ, ë³¸ì¸ì´ ì„ì˜ë¡œ ë§Œë“  ê°œë…ì ì¸ ì§ˆë¬¸ì„ í¬í•¨í•¨
* ëŒ€í•™ì› ë©´ì ‘ì„ ëŒ€ë¹„í•˜ê¸° ìœ„í•œ ìë£Œì„
* **ì„œìš¸ëŒ€ ì»´í“¨í„°ê³µí•™ë¶€** ë° **í¬í•­ê³µëŒ€ ì»´í“¨í„°ê³µí•™ê³¼**ëŠ” 2ê°€ì§€ì˜ ê³¼ëª©ì„ ì„ íƒí•˜ì—¬ ë©´ì ‘ì„ ë³´ë„ë¡ ë˜ì–´ìˆìœ¼ë©°, ê·¸ë¦¼ê³¼ í•¨ê»˜ ì‹¬ì¸µì ìœ¼ë¡œ ë¬»ëŠ” ë¬¸ì œê°€ ì¶œì œë˜ëŠ” ê²ƒìœ¼ë¡œ ì•Œê³  ìˆìŒ [ì‹¬ì¸µ ë¬¸ì œë¡œ ì´ë™](https://github.com/gjlee0802/computer-architecture/blob/main/interview_questions/4-the-processor.md#pipeline-hazards-%EC%8B%AC%EC%B8%B5-%EB%AC%B8%EC%A0%9C)
* **ì¹´ì´ìŠ¤íŠ¸ ì „ì‚°í•™ë¶€**ëŠ” ì»´í“¨í„° êµ¬ì¡° ë¿ë§Œ ì•„ë‹ˆë¼ ëª¨ë“  ê³¼ëª©ì—ì„œ ì „ë°˜ì ì¸ ë²”ìœ„ì— ê±¸ì³ ì§ˆë¬¸ì„ í•˜ë©°, ê°œë… ì§ˆë¬¸ë“¤, í•µì‹¬ ê°œë…ì„ ìœ„ì£¼ë¡œ ì¶œì œë˜ëŠ” ê²ƒìœ¼ë¡œ ì•Œê³  ìˆìŒ [ê°œë… ì§ˆë¬¸ìœ¼ë¡œ ì´ë™](https://github.com/gjlee0802/computer-architecture/blob/main/interview_questions/4-the-processor.md#%EA%B0%9C%EB%85%90-%EC%A7%88%EB%AC%B8)

## ê°œë… ì§ˆë¬¸
### ISA (Instruction set architecture)
#### 1. CISCì™€ RISCì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¸ê°€?
~~~
CISCëŠ” ë³µì¡í•˜ì§€ë§Œ ì½”ë“œ ë°€ë„ê°€ ë†’ê³ , RISCëŠ” ë‹¨ìˆœí•˜ê³  ì„±ëŠ¥ ìµœì í™”ì— ìœ ë¦¬
"ì½”ë“œ ë°€ë„ê°€ ë†’ë‹¤" == "ì ì€ ëª…ë ¹ì–´ì™€ ì‘ì€ ì½”ë“œ í¬ê¸°ë¡œ ë™ì¼í•œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŒ"
~~~
| **êµ¬ë¶„**          | **CISC** (x86) | **RISC** (ARM, RISC-V) |
|------------------|--------------|----------------|
| **ëª…ë ¹ì–´ ë³µì¡ì„±** | ë³µì¡, ê°€ë³€ ê¸¸ì´ | ë‹¨ìˆœ, ê³ ì • ê¸¸ì´ |
| **ëª…ë ¹ì–´ ìˆ˜**    | ë§ìŒ | ì ìŒ |
| **ë©”ëª¨ë¦¬ ì ‘ê·¼**  | ëª…ë ¹ì–´ì—ì„œ ì§ì ‘ ê°€ëŠ¥ | Load/Store ë°©ì‹ |
| **ì‹¤í–‰ ì†ë„**    | ìƒëŒ€ì ìœ¼ë¡œ ëŠë¦¼ | ë¹ ë¦„ (íŒŒì´í”„ë¼ì´ë‹ ìµœì í™”) |
| **í•˜ë“œì›¨ì–´ ë³µì¡ë„** | ë†’ìŒ | ë‚®ìŒ |
| **ì „ë ¥ ì†Œëª¨**    | ë†’ìŒ | ë‚®ìŒ (ëª¨ë°”ì¼, ì„ë² ë””ë“œì— ìœ ë¦¬) |
| **ëŒ€í‘œ CPU**     | Intel, AMD | ARM, Apple M-series, RISC-V |

#### 2. Register Fileê³¼ Cacheì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¸ê°€?
~~~
RegisterëŠ” CPU ë‚´ë¶€ì˜ ê°€ì¥ ë¹ ë¥¸ ì €ì¥ ê³µê°„, CacheëŠ” ë©”ëª¨ë¦¬ì™€ CPU ì‚¬ì´ì˜ ì„ì‹œ ì €ì¥ ê³µê°„ì„

RegisterëŠ” í”„ë¡œì„¸ì„œê°€ ì§ì ‘ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ë¥¼ ì €ì¥í•¨

CacheëŠ” ìµœê·¼ ì‚¬ìš©í•œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ì—¬ ë©”ëª¨ë¦¬ ì ‘ê·¼ ì†ë„ë¥¼ ì¤„ì„ (CPU-ë©”ëª¨ë¦¬ ë³‘ëª© í•´ì†Œ)
Cache ê³„ì¸µìœ¼ë¡œëŠ” L1, L2, L3 ìºì‹œê°€ ìˆìŒ (L1ì´ ê°€ì¥ ë¹ ë¥´ê³ , L3ê°€ ìƒëŒ€ì ìœ¼ë¡œ ëŠë¦¼)
~~~

| **êµ¬ë¶„**         | **Register File** | **Cache** |
|-----------------|------------------|-----------|
| **ìœ„ì¹˜**        | CPU ë‚´ë¶€ | CPUì™€ ë©”ëª¨ë¦¬ ì‚¬ì´ |
| **ì†ë„**        | ê°€ì¥ ë¹ ë¦„ | ë¹ ë¦„ (RAMë³´ë‹¤ ë¹ ë¦„) |
| **ìš©ëŸ‰**        | ë§¤ìš° ì‘ìŒ (ìˆ˜ì‹­ ê°œ) | ìƒëŒ€ì ìœ¼ë¡œ í¼ (KB~MB) |
| **ì—­í• **        | ëª…ë ¹ì–´ ì‹¤í–‰ì„ ìœ„í•œ ë°ì´í„° ì €ì¥ | ìì£¼ ì‚¬ìš©í•˜ëŠ” ë°ì´í„° ì„ì‹œ ì €ì¥ |
| **ì ‘ê·¼ ì†ë„**   | ë‚˜ë…¸ì´ˆ(ns) ìˆ˜ì¤€ | ë‚˜ë…¸ì´ˆ~ë§ˆì´í¬ë¡œì´ˆ(ns~Î¼s) ìˆ˜ì¤€ |
| **êµ¬ì„± ë°©ì‹**   | ì¼ë°˜ ë ˆì§€ìŠ¤í„°, íŠ¹ìˆ˜ ë ˆì§€ìŠ¤í„° | L1, L2, L3 Cache ê³„ì¸µ |

#### 3. Intelê³¼ AMDê°€ ë§Œë“œëŠ” CPUì˜ ê³µí†µì ê³¼ ì°¨ì´ì ì€ ë¬´ì—‡ì¸ê°€?
* âœ… ê³µí†µì 
    * x86 ì•„í‚¤í…ì²˜ ê¸°ë°˜ â†’ CISC êµ¬ì¡° ì‚¬ìš©
    * 64 ë¹„íŠ¸ í”„ë¡œì„¸ì„œ ì§€ì›
    * ë©€í‹°ì½”ì–´ / í•˜ì´í¼ìŠ¤ë ˆë”© ì§€ì›
        * í•˜ì´í¼ìŠ¤ë ˆë”©ì€ CPUì˜ ë¬¼ë¦¬ ì½”ì–´ë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ 2ê°œì˜ ì½”ì–´ì²˜ëŸ¼ í™œìš©í•˜ëŠ” ê¸°ìˆ 
* âœ… ì°¨ì´ì 
    * Intelì€ ì‹±ê¸€ ì½”ì–´ ì„±ëŠ¥ê³¼ ìì²´ ê³µì • ê°•ì , AMDëŠ” ë©€í‹°ì½”ì–´ì™€ ê°€ì„±ë¹„ ê°•ì 


### Pipelined Architecture
#### 1. íŒŒì´í”„ë¼ì´ë‹ì€ ì™œ í•˜ëŠ”ê°€?
~~~
Instructionë“¤ì„ ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ì—¬ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•¨

ë³‘ë ¬ì²˜ë¦¬ë¡œ ì„±ëŠ¥ í–¥ìƒì„ ê¸°ëŒ€í•˜ëŠ” ê²ƒì„ ë§Œì•½ ëª¨ë“  ë‹¨ê³„(stage)ê°€ ê±°ì˜ ê°™ì€ ì‹œê°„ì´ ê±¸ë¦¬ê³ , í•  ì¼ì´ ì¶©ë¶„íˆ ë§ë‹¤ë©´, 
íŒŒì´í”„ë¼ì´ë‹ì— ì˜í•œ ì†ë„ í–¥ìƒì€ íŒŒì´í”„ë¼ì´ë‹ ë‹¨ê³„ ìˆ˜(stage ìˆ˜)ì™€ ê°™ìŒ
~~~
#### 2. íŒŒì´í”„ë¼ì¸ í•´ì €ë“œ(Pipeline Hazard)ë€ ë¬´ì—‡ì¸ê°€? ê·¸ë¦¬ê³  ì¢…ë¥˜ì—ëŠ” ë¬´ì—‡ì´ ìˆëŠ”ê°€?
~~~
ë‹¤ìŒ Instructionì´ ë‹¤ìŒ Clock Cycleì— ì‹¤í–‰ë  ìˆ˜ ì—†ëŠ” ìƒí™©
ì¦‰, ë§¤ Cycleë§ˆë‹¤ Instructionì„ ì‹¤í–‰í•´ì•¼ í•˜ëŠ”ë°, ê·¸ë ‡ì§€ ëª»í•˜ëŠ” ê²½ìš°
~~~
- Structure Hazards (Structural)
    - **ì •ì˜**: ì„œë¡œ ë‹¤ë¥¸ ëª…ë ¹ì–´ë“¤ì´ í•˜ë“œì›¨ì–´ ë¦¬ì†ŒìŠ¤ë¥¼ ë™ì‹œì— ì‚¬ìš©í•˜ë ¤ê³  í•  ë•Œ êµ¬ì¡°ì ìœ¼ë¡œ ìƒê¸°ëŠ” ë¬¸ì œ
    - **ì˜ˆì‹œ**: ì˜ˆë¥¼ ë“¤ì–´ Load/Store ëª…ë ¹ì–´ê°€ ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•˜ëŠ” ë™ì‹œì— Instruction Fetchë¥¼ í•˜ë ¤ í•˜ëŠ” ë‹¤ë¥¸ Instructionê°€ ìˆì–´, ë™ì‹œì ìœ¼ë¡œ í•˜ë“œì›¨ì–´ì— ì ‘ê·¼í•˜ì—¬ ë°œìƒí•˜ëŠ” ì§€ì—° ë¬¸ì œê°€ ìˆìŒ
    - **í•´ê²°**: Instruction Memoryì™€ Data Memoryë¥¼ êµ¬ì¡°ì ìœ¼ë¡œ ë¶„ë¦¬ì‹œì¼œì•¼ í•˜ê±°ë‚˜, Instructionê³¼ Data Cacheë¥¼ ë¶„ë¦¬í•´ì•¼ í•¨
- Data Hazards
    - **ì •ì˜**: ì‚¬ìš©í•˜ë ¤ëŠ” ë°ì´í„°ê°€ ì¤€ë¹„ë˜ì§€ ì•Šì•„ ë°ì´í„° ì˜ì¡´ì„±ìœ¼ë¡œ ì¸í•´ ì§€ì—°ì´ ë°œìƒí•˜ëŠ” ë¬¸ì œ
    - **ì˜ˆì‹œ**: ë°”ë¡œ ì§ì „ Instructionì˜ ì—°ì‚° ê²°ê³¼ê°€ ë ˆì§€ìŠ¤í„°ì— ì“°ì´ì§€ ì•ŠëŠ” Read After Write ë¬¸ì œ ê°™ì€ ê²½ìš°ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒ
    - **í•´ê²°**: ìœ„ì˜ ì˜ˆì‹œ ê°™ì€ ê²½ìš°ëŠ” **Forwarding**ìœ¼ë¡œ í•´ê²°í•˜ë©°, Forwardingìœ¼ë¡œ í•´ê²°ë˜ì§€ ì•ŠëŠ” ì˜ˆì‹œë¡œëŠ” ë©”ëª¨ë¦¬ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì•¼ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆì–´ì„œ ê°’ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì˜ˆê°€ ìˆëŠ”ë°, ì´ëŸ¬í•œ ê²½ìš° **Code Scheduling**ì„ í†µí•œ Stall ë°©ì§€ë¥¼ ê³ ë ¤í•  ìˆ˜ ìˆìŒ
- Control Hazards
    - **ì •ì˜**: ë¶„ê¸°ë¡œ ì¸í•´ Instruction flowê°€ ë°”ë€œìœ¼ë¡œ ì¸í•´ ì§€ì—°ì´ ë°œìƒí•˜ëŠ” ë¬¸ì œ
    - **ì˜ˆì‹œ**: ì˜ˆë¥¼ ë“¤ì–´ beq ê°™ì€ ì¡°ê±´ë¶€ ë¶„ê¸°(branch)ê°€ ìˆë‹¤ê³  í•  ë•Œ, ë°”ë¡œ ë‹¤ìŒ Instructionì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ìˆ˜í–‰ ì¤‘ì¼ ìˆ˜ ìˆëŠ”ë°, branchë¡œ ì¸í•´ ë‹¤ë¥¸ Instruction ìˆ˜í–‰ì„ í•´ì•¼í•  ìˆ˜ ìˆìŒ
    - **í•´ê²°**: Branch Predictionì„ ë„ì…í•˜ì—¬ ê°„ë‹¨í•œ ë°©ë²•ìœ¼ë¡œëŠ” í•­ìƒ í‹€ë¦° ê²ƒ(ì•„ë‹Œ ê²ƒìœ¼ë¡œ)ìœ¼ë¡œ ì˜ˆì¸¡(ê°€ì •)í•  ìˆ˜ ìˆìœ¼ë©°(ë‹¤ìŒ Instructionì´ ìˆ˜í–‰ë  ê²ƒìœ¼ë¡œ ì˜ˆì¸¡), ë‹¤ë¥¸ í˜„ì‹¤ì ì¸ ë°©ë²•ìœ¼ë¡œëŠ” Hisory í…Œì´ë¸”ì„ í™œìš©í•˜ì—¬ ì´ì „ì˜ branch ê²°ê³¼ë¥¼ ì°¸ê³ í•˜ì—¬ ì˜ˆì¸¡í•˜ëŠ” ë°©ë²•ì´ ìˆìŒ

#### 3. íŒŒì´í”„ë¼ì´ë‹ì—ì„œ Branch Predictionì˜ ì—­í• ì€ ë¬´ì—‡ì¸ê°€?
~~~
Branch Predictionì€ Control Hazardsë¥¼ ìœ„í•œ ë¶„ê¸° ê²°ê³¼ë¥¼ ì˜ˆì¸¡í•¨ìœ¼ë¡œì¨ ì§€ì—°ì„ ì¤„ì´ë ¤ëŠ” ë°©ë²•ìœ¼ë¡œ, 
ë‹¨ìˆœí•œ ë°©ë²•ìœ¼ë¡œëŠ” í•­ìƒ ë¶„ê¸° ê²°ê³¼ê°€ í‹€ë¦° ê²ƒ(ì•„ë‹Œ ê²ƒ)ìœ¼ë¡œ ê°€ì •í•˜ëŠ” ê²ƒì´ ìˆìœ¼ë©°, 
í˜„ì‹¤ì ì¸ ë°©ë²•ìœ¼ë¡œëŠ” history tableì„ ì´ìš©í•˜ì—¬ ì´ì „ì˜ ë¶„ê¸°ë“¤ì„ ì°¸ê³ í•´ì„œ ì˜ˆì¸¡í•˜ëŠ” Dynamic Branch Predictionì´ ìˆìŒ
~~~

#### 4. Branch Predictionì—ì„œ ë‹¨ìˆœíˆ ì•„ë‹Œ ê²ƒìœ¼ë¡œ ê°€ì •í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í–ˆì„ ë•Œì˜ ë¬¸ì œì ì€? (êµ³ì´ Dynamic Branch Predictionì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ )
~~~
ì´ˆëŒ€í˜•(Stageê°€ ì•„ì£¼ ë§ì€) Pipelineì¼ìˆ˜ë¡, branch íŒ¨ë„í‹°(stall)ì€ ì¤‘ìš”í•´ì§(ì»¤ì§)
ì´ëŸ° ê²½ìš°ë¥¼ ëŒ€ë¹„í•˜ì—¬ Dynamic Branch Predictionì„ í™œìš©í•˜ëŠ” ê²ƒì´ ì ì ˆí•¨
~~~
### Exceptions
#### 1. Exceptionì˜ ì •ì˜ëŠ”?
~~~
CPU ë‚´ë¶€ì—ì„œ ë°œìƒí•œ, ì˜ˆê¸°ì¹˜ ëª»í•œ ìƒí™©
~~~
#### 2. Exceptions ê³¼ Interruptsì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¸ê°€?
~~~
Exception(ì˜ˆì™¸)ì€ CPU ë‚´ë¶€(í”„ë¡œê·¸ë¨ ë‚´ë¶€)ì—ì„œ ë°œìƒí•˜ì§€ë§Œ,
Interrupt(ì¸í„°ëŸ½íŠ¸)ì€ ì™¸ë¶€ ì¥ì¹˜ë‚˜ OSë¡œë¶€í„° ë°œìƒí•¨
~~~
* Exception(ì˜ˆì™¸)ì€ **CPU ë‚´ë¶€(í”„ë¡œê·¸ë¨ ë‚´ë¶€)ì—ì„œ** ë°œìƒ
    * e.g., undefined opcode, overflow, syscall, ...
* Interrupt(ì¸í„°ëŸ½íŠ¸)ì€ **ì™¸ë¶€ I/O Controller(CPU ì™¸ë¶€ì˜ ì¥ì¹˜, OS ë“±...)ë¡œë¶€í„°** ë°œìƒ

#### 3. Exception ì²˜ë¦¬ ê³¼ì •ì„ ì„¤ëª…í•˜ì‹œì˜¤.
~~~
ì˜ˆì¸¡ ì‹¤íŒ¨í•œ branchì˜ ì²˜ë¦¬ì™€ ìœ ì‚¬í•¨
1. Exceptionì´ ë°œìƒí•œ Instructionê³¼ ì´í›„ì— ìˆ˜í–‰ ì¤‘ì´ë˜ Instructionë“¤ì€ Flushí•˜ê³ ,
2. EPCì™€ Cause Registerì˜ ê°’ì„ ì„¸íŒ…í•˜ì—¬ Exceptionì´ ë°œìƒí•œ ì£¼ì†Œ, ë°œìƒ ì›ì¸ì„ ì €ì¥í•˜ê³ ,
3. handler ëª…ë ¹ì–´ë¡œ jumpí•˜ì—¬ handlerê°€ ì²˜ë¦¬í•˜ë„ë¡ í•¨
~~~

## ğŸ’ª Pipeline Hazards ì‹¬ì¸µ ë¬¸ì œ
### 1. 5ë‹¨ê³„ì˜ Pipelineì—ì„œ ì•„ë˜ì˜ ì½”ë“œê°€ ìˆ˜í–‰ëœë‹¤ê³  í•˜ì. (SSU 19ë…„ë„ ê¸°ì¶œ)
~~~
add $3, $1, $2      ...(1)
and $12, $5, $3     ...(2)
or  $13, $3, $6     ...(3)
sub $14, $3, $$2    ...(4)
sw  $15, 100($3)    ...(5)
~~~
#### 1.1. ìœ„ ì½”ë“œ ìˆ˜í–‰ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” hazardë¥¼ ì„¤ëª…í•˜ì‹œì˜¤.
~~~
ğŸ¯ 1ë²ˆ ëª…ë ¹ì–´ì™€ 2ë²ˆ ëª…ë ¹ì–´ ì‚¬ì´ì— $3ìœ¼ë¡œ ì¸í•œ Data hazardê°€ ë°œìƒí•œë‹¤. 
(2)ë¥¼ ìˆ˜í–‰í•¨ì— ìˆì–´ì„œ EX ë‹¨ê³„(ALU)ì—ì„œ $3ì— í•´ë‹¹í•˜ëŠ” ê°’ì´ í•„ìš”í•œë°, 
add ëª…ë ¹ì–´ì˜ ê²°ê³¼ë¡œ ì–»ì–´ì§€ëŠ” ë°ì´í„°ì´ê¸° ë•Œë¬¸ì— 
RAW(Read After Write) ë°ì´í„° ì˜ì¡´ì„±ìœ¼ë¡œ ì¸í•´ hazardê°€ ë°œìƒí•œë‹¤.
~~~
#### 1.2. ìœ„ì—ì„œ ë°œìƒí•œ hazardë¥¼ Forwarding ë°©ë²•ë§Œìœ¼ë¡œ í•´ê²°í•˜ë ¤ê³  í•œë‹¤. ê°€ëŠ¥í•œì§€ ì—¬ë¶€ë¥¼ ë‹µí•˜ì‹œì˜¤. (1) Yesë¼ë©´, Forwarding ê³¼ì •ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•˜ì‹œì˜¤. (2) Noë¼ë©´, ê·¸ ì´ìœ ë¥¼ ì„¤ëª…í•˜ê³  ì¶”ê°€ì ìœ¼ë¡œ í•´ê²°í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•˜ì‹œì˜¤.
~~~
ğŸ¯ Yes, Forwarding ë°©ë²•ë§Œìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.
~~~
* (2)ë²ˆ ëª…ë ¹ì–´ì˜ ê²½ìš°, 
    * `$3`ì´ **EX ë‹¨ê³„ì—ì„œ í•„ìš”**í•˜ë¯€ë¡œ, (1)ë²ˆ ëª…ë ¹ì–´ê°€ MEM ë‹¨ê³„ì— ìˆì„ ë•Œ **EX/MEM ë ˆì§€ìŠ¤í„°ì˜ ê°’ì„ í¬ì›Œë”©**í•˜ì—¬ í•´ê²°í•¨
* (3)ë²ˆ ëª…ë ¹ì–´ì˜ ê²½ìš°,
    * (1)ë²ˆ ëª…ë ¹ì–´ê°€ WB ë‹¨ê³„ì— ìˆì„ ë•Œ **MEM/WB ë ˆì§€ìŠ¤í„°ë¡œë¶€í„° ë°ì´í„°ë¥¼ í¬ì›Œë”©**í•  ìˆ˜ ìˆìŒ


#### 1.3. ìœ„ì—ì„œ ë°œìƒí•œ hazardë¥¼ stall ë°©ë²•(bubble ì¶”ê°€)ë§Œìœ¼ë¡œ í•´ê²°í•˜ë ¤ í•œë‹¤. ìœ„ ì½”ë“œë¥¼ ëª¨ë‘ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ bubbleì´ ì´ ëª‡ ê°œ í•„ìš”í•œì§€ ì„¤ëª…í•˜ì‹œì˜¤.

~~~
ğŸ¯ 2ê°œ í•„ìš”í•˜ë‹¤. 
(2)ë²ˆ ëª…ë ¹ì–´ê°€ ID ë‹¨ê³„ì—ì„œ $3ì˜ ê°’ì„ ì½ìœ¼ë ¤ë©´,
(1)ë²ˆ ëª…ë ¹ì–´ì˜ WB ë‹¨ê³„ì—ì„œ ì“°ê¸°ê°€ ëë‚œ í›„ ì½ì–´ì•¼í•˜ëŠ”ë°, 
2ë²ˆì˜ Stallë¡œ ë¯¸ë¤„ì ¸ì•¼ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
~~~

#### 1.4. ì•„ë˜ì™€ ê°™ì´ (2)ì˜ ëª…ë ¹ì–´ê°€ `lw $2, 4($4)`ë¡œ ë°”ë€Œì—ˆë‹¤ê³  í•˜ì. ì´ë¡œ ì¸í•´ ìƒˆë¡œ ìƒê¸´ hazardë¥¼ ì„¤ëª…í•˜ì‹œì˜¤.
~~~
add $3, $1, $2      ...(1)
lw  $2, 4($4)       ...(2)
or  $13, $3, $6     ...(3)
sub $14, $3, $2     ...(4)
sw  $15, 100($3)    ...(5)
~~~
~~~
ğŸ¯ (2)ì™€ (4) ì‚¬ì´ì— Load-use hazardê°€ ìƒê¸´ë‹¤. 
(4)ë²ˆ ëª…ë ¹ì–´ëŠ” $2ì˜ ê°’ì„ EX ë‹¨ê³„ì— í”¼ì—°ì‚°ìë¡œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ë°, 
(4)ë²ˆ ëª…ë ¹ì–´ê°€ EX ë‹¨ê³„ì— ë“¤ì–´ì„°ì„ ë•Œ, 
(2)ë²ˆ ëª…ë ¹ì–´ëŠ” WB ë‹¨ê³„ì— ë“¤ì–´ì„°ì„ ê²ƒì´ë‹¤.
ë”°ë¼ì„œ (2)ë²ˆ ëª…ë ¹ì–´ëŠ” WB ë‹¨ê³„ë¥¼ ë§ˆì¹˜ì§€ ì•Šì•„,
$2ì˜ ê°’ì„ ì–»ì„ ìˆ˜ ì—†ë‹¤.
~~~

#### 1.5. ìƒˆë¡œ ìƒê¸´ hazardë¥¼ Forwarding ë°©ë²• ë§Œìœ¼ë¡œ í•´ê²°í•˜ë ¤ í•œë‹¤. ê°€ëŠ¥í•œì§€ ì—¬ë¶€ë¥¼ ë‹µí•˜ì‹œì˜¤. (1) Yesë¼ë©´, Forwarding ê³¼ì •ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•˜ì‹œì˜¤. (2) Noë¼ë©´, ê·¸ ì´ìœ ë¥¼ ì„¤ëª…í•˜ê³  ì¶”ê°€ë¡œ í•´ê²°í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•˜ì‹œì˜¤
~~~
ğŸ¯ Yes, Forwarding ë°©ë²•ë§Œìœ¼ë¡œ í•´ê²° ê°€ëŠ¥í•˜ë‹¤.
ì´ ë¬¸ì œëŠ” RAWì˜ ë°ì´í„° ì˜ì¡´ì„±ì— ì˜í•œ ê²ƒì´ë‹¤.
(4)ë²ˆ ëª…ë ¹ì–´ê°€ EX ë‹¨ê³„ì— ë“¤ì–´ì„  ì‹œì ì—,
(2)ë²ˆ ëª…ë ¹ì–´ëŠ” MEM ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•˜ì—¬ $2ì˜ ê°’ì„ ë©”ëª¨ë¦¬ë¡œë¶€í„° ì½ì€ ìƒíƒœì´ë‹¤.
ì´ë•Œ, $2ì˜ ê°’ì´ ì¡´ì¬í•˜ëŠ” ìƒíƒœì´ë©°, MEM/WB ë ˆì§€ìŠ¤í„°ì—ì„œ í¬ì›Œë”©ì˜¤ë©´ í•´ê²°ì´ ê°€ëŠ¥í•˜ë‹¤.
~~~

* âœ… **ì´ ë¬¸ì œì—ì„œ ì•Œ ìˆ˜ ìˆëŠ” Point**: Load-use hazardë¼ê³  í•´ì„œ Forwardingìœ¼ë¡œ í•´ê²°í•˜ì§€ ëª»í•˜ëŠ” ê²ƒì´ ì•„ë‹˜! 
    * Load-use hazardì¸ë°, ê°’ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ Forwardingì´ ì•„ë‹Œ, Code schedulingì„ ê³ ë ¤í•´ì•¼í•˜ëŠ” ê²ƒì„

#### 1.6. ìœ„ì—ì„œ ì¶”ê°€ë¡œ ë°œìƒí•œ hazardë¥¼ stall ë°©ë²•ë§Œìœ¼ë¡œ í•´ê²°í•˜ë ¤ê³  í•œë‹¤. bubbleì´ ì´ ëª‡ ê°œ í•„ìš”í•œì§€ ì„¤ëª…í•˜ì‹œì˜¤.
~~~
ğŸ¯ bubbleì€ 2ê°œ í•„ìš”í•˜ë‹¤. 
2ê°œì˜ Bubbleì´ë©´ (4)ë²ˆ ëª…ë ¹ì—ì„œ $2ì˜ ê°’ì´ í•„ìš”í•œ ì‹œì (ID ë‹¨ê³„)ì—,
(2)ë²ˆ ëª…ë ¹ì˜ WB ë‹¨ê³„ë¥¼ ë§ˆì¹  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

(2) IF ID EX MEM WB
(3)    IF ID EX  MEM WB
(-)       -  -   -   -  -
(-)          -   -   -  -  -
(4)              IF  ID EX MEM WB
~~~

-----

### 2. 'ê·¸ë¦¼ 1'ì€ 5ë‹¨ê³„ pipelineì—ì„œ data hazardë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ forwarding unitê³¼ hazard detection unitì´ ì¶”ê°€ëœ íšŒë¡œë„ì´ë‹¤. (SSU 17ë…„ë„ ê¸°ì¶œ)
![datapath_with_hazard_detection](../image_files/datapath_with_hazard_detection.png)  
ê·¸ë¦¼ 1. data hazardë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ forwarding unitê³¼ hazard detection unitì´ ì¶”ê°€ëœ íšŒë¡œë„
#### 2.1. ì•„ë˜ ì½”ë“œë¥¼ ê·¸ë¦¼ 1 íšŒë¡œì—ì„œ ìˆ˜í–‰í•  ê²½ìš°, ë°œìƒí•˜ëŠ” ëª¨ë“  hazardì— ëŒ€í•´ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•˜ì‹œì˜¤.
~~~
add $5, $2, $1      ...(1)
lw  $3, 4($5)       ...(2)
lw  $2, 0($2)       ...(3)
or  $3, $5, $3      ...(4)
sw  $3, 0($5)       ...(5)
~~~
~~~
ğŸ¯ Hazard 1) ì²«ë²ˆì§¸ Hazardë¡œ,
1ë²ˆ ëª…ë ¹ì–´ì™€ 2ë²ˆ ëª…ë ¹ì–´ ì‚¬ì´ì— $5 ë•Œë¬¸ì— RAW Data Dependencyë¡œ ì¸í•œ Data Hazardê°€ ë°œìƒí•œë‹¤.
$5ì˜ ê°’ì´ 2ë²ˆ ëª…ë ¹ì–´ì˜ EX stageì— í”¼ì—°ì‚°ìë¡œ í•„ìš”í•œë°,
1ë²ˆ ëª…ë ¹ì–´ì˜ $5ì˜ ê°’ì€ ì—°ì‚°ì„ ê±°ì³ EX stageë¥¼ ë§ˆì³¤ì„ ë•Œì˜ ê²°ê³¼ ê°’ì´ë¯€ë¡œ EX/MEM ë ˆì§€ìŠ¤í„°ë¡œë¶€í„° Forwardingí•´ì„œ ê°€ì ¸ì™€ì•¼ í•œë‹¤.
2ë²ˆ ëª…ë ¹ì–´ê°€ EX stageì— ì§„ì…í•  ë•Œ, 1ë²ˆ ëª…ë ¹ì–´ëŠ” MEM stageì— ì§„ì…í•˜ë¯€ë¡œ Forwardingì´ ê°€ëŠ¥í•˜ë‹¤.

ğŸ¯ Hazard 2) ë‘ë²ˆì§¸ Hazardë¡œ,
2ë²ˆ ëª…ë ¹ì–´ì™€ 4ë²ˆ ëª…ë ¹ì–´ ì‚¬ì´ì— $3 ë•Œë¬¸ì— Load-Use Data Hazardê°€ ë°œìƒí•œë‹¤.
$3ì˜ ê°’ì´ 4ë²ˆ ëª…ë ¹ì–´ì˜ EX stageì— í”¼ì—°ì‚°ìë¡œ í•„ìš”í•œë°,
2ë²ˆ ëª…ë ¹ì–´ì˜ $3ì˜ ê°’ì€ ë©”ëª¨ë¦¬ì—ì„œ ì½ì€(load) ê°’ì´ë¯€ë¡œ MEM/WB ë ˆì§€ìŠ¤í„°ë¡œë¶€í„° Forwardingí•´ì„œ ê°€ì ¸ì™€ì•¼ í•œë‹¤. 
2ë²ˆ ëª…ë ¹ì–´ê°€ WB stageì— ì§„ì…í•  ë•Œ, 4ë²ˆ ëª…ë ¹ì–´ëŠ” EX stageì— ì§„ì…í•˜ë¯€ë¡œ Forwardingì´ ê°€ëŠ¥í•˜ë‹¤.

ğŸ¯ Hazard 3) ì„¸ë²ˆì§¸ Hazardë¡œ,
4ë²ˆ ëª…ë ¹ì–´ì™€ 5ë²ˆ ëª…ë ¹ì–´ ì‚¬ì´ì— $3 ë•Œë¬¸ì— RAW Data Dependencyë¡œ ì¸í•œ Data Hazardê°€ ë°œìƒí•œë‹¤.
RAW HazardëŠ” "ì´ì „ ëª…ë ¹ì–´ì—ì„œ ê°’ì„ ê³„ì‚°í•˜ì—¬ ê°±ì‹ í•˜ëŠ”ë°, ë‹¤ìŒ ëª…ë ¹ì–´ì—ì„œ ì´ë¥¼ ì‚¬ìš©í•´ì•¼ í•  ë•Œ" ë°œìƒí•˜ëŠ” ê²ƒì´ë‹¤. 
ì¦‰, 4ë²ˆ ëª…ë ¹ì–´ì—ì„œ $3ì„ ìƒˆë¡­ê²Œ í• ë‹¹í•˜ëŠ”ë°, 5ë²ˆ ëª…ë ¹ì–´ì—ì„œ $3ì„ ì €ì¥í•˜ë ¤ê³  í•˜ë¯€ë¡œ,
5ë²ˆ ëª…ë ¹ì–´ê°€ 4ë²ˆ ëª…ë ¹ì–´ì˜ ê²°ê³¼ë¥¼ ì •í™•í•˜ê²Œ ë°˜ì˜í•˜ë ¤ë©´ forwarding (data forwarding)ì´ë‚˜ stallì´ í•„ìš”í•˜ë‹¤.
~~~

#### 2.2. 'ê·¸ë¦¼ 1'ì—ì„œ forwarding unitì€ ìˆì§€ë§Œ, ë§Œì¼ hazard detection unitì´ ì—†ë‹¤ë©´ ìœ„ ì½”ë“œë¥¼ ë¬¸ì œì—†ì´ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ Yes/Noë¡œ ëŒ€ë‹µí•˜ê³  ê·¸ ì´ìœ ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•˜ì‹œì˜¤.
~~~
ğŸ¯ Yes, Forwarding Unitë§Œìœ¼ë¡œ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•˜ë©°, Hazard Detection Unitì´ ì—†ì–´ë„ ë¬¸ì œë˜ì§€ ì•ŠëŠ”ë‹¤.

âœ… Forwarding Unitì€ EX ë‹¨ê³„ì—ì„œ ë°œìƒí•œ ì—°ì‚° ê²°ê³¼ë¥¼ ë°”ë¡œ ë‹¤ìŒ ëª…ë ¹ì–´ì— ì „ë‹¬í•˜ì—¬ RAW (Read After Write) Hazardë¥¼ ë°©ì§€í•˜ëŠ” ì—­í• ì„ í•œë‹¤.
âœ… í•˜ì§€ë§Œ Load-Use Hazardì˜ ê²½ìš° Forwardingë§Œìœ¼ë¡œëŠ” í•´ê²°ë˜ì§€ ì•Šê³  Stallì´ í•„ìš”í•  ìˆ˜ ìˆë‹¤.
âœ… ì´ ì½”ë“œì—ì„œëŠ” 3ë²ˆ ëª…ë ¹ì–´(lw $2, 0($2))ê°€ ìì—°ìŠ¤ëŸ½ê²Œ Stalling ì—­í• ì„ ìˆ˜í–‰í•˜ì—¬, ì¶”ê°€ì ì¸ Stall ì—†ì´ Forwardingë§Œìœ¼ë¡œ í•´ê²° ê°€ëŠ¥í•˜ë‹¤.
~~~
| ì¡°ê±´ | Forwarding Unitë§Œìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥ ì—¬ë¶€ | ì´ìœ  |
|------|------------------------|------|
| **3ë²ˆ ëª…ë ¹ì–´ê°€ ì—†ëŠ” ê²½ìš°** (2ë²ˆ â†’ 4ë²ˆ ë°”ë¡œ ì‹¤í–‰) | âŒ **Stallingì´ í•„ìš”í•¨** | Forwardingë§Œìœ¼ë¡œ í•´ê²°ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ Hazard Detection Unitì´ í•„ìš” |
| **3ë²ˆ ëª…ë ¹ì–´ê°€ ìˆëŠ” ê²½ìš°** (2ë²ˆ â†’ 3ë²ˆ â†’ 4ë²ˆ ì‹¤í–‰) | âœ… **ë¬¸ì œì—†ì´ ì‹¤í–‰ ê°€ëŠ¥** | 3ë²ˆ ëª…ë ¹ì–´ê°€ ìì—°ìŠ¤ëŸ½ê²Œ Stalling ì—­í• ì„ ìˆ˜í–‰í•˜ì—¬ Forwardingë§Œìœ¼ë¡œ í•´ê²° ê°€ëŠ¥ |

#### 2.3. 'ê·¸ë¦¼ 1'ì—ì„œ forwarding unitì€ ì—†ê³  hazard detection unitë§Œ ê°€ì§€ê³  ìœ„ ì½”ë“œë¥¼ ìˆ˜í–‰í•˜ë ¤ê³  í•œë‹¤. hazard detection unitì— ì–´ë–¤ ì…ë ¥ê³¼ ì¶œë ¥ ì‹ í˜¸ê°€ ìƒˆë¡œ í•„ìš”í•œì§€ë¥¼ ì„¤ëª…í•˜ì‹œì˜¤. ì™œ ì´ëŸ° ì‹ í˜¸ë“¤ì´ í•„ìš”í•œì§€ ì˜ˆë¥¼ ë“¤ì–´ ì„¤ëª…í•˜ì‹œì˜¤.
~~~
âœ… Forwarding Unitì—ì„œëŠ” EX stageì—ì„œ Hazardë¥¼ ê°ì§€ í–ˆëŠ”ë°, Hazard Detection Unitì—ì„œ Hazardë¥¼ ê²€ì¶œí•˜ê¸° ìœ„í•´ì„œ ID stageì—ì„œ ë¹„êµí•´ì•¼ í•˜ëŠ” ê²ƒì´ í•µì‹¬ì´ë‹¤!!

âœ… Forwarding Unitì€ EX stageì—ì„œ ID/EX.registerRs, ID/EX.registerRt í”¼ì—°ì‚°ì ì •ë³´, ì§ì „(1 Cycle ì „) ëª…ë ¹ì–´ì˜ ëª©ì ì§€ ë ˆì§€ìŠ¤í„° EX/MEM.registerRd, 2 Cycle ì „ ëª…ë ¹ì–´ì˜ MEM/WB.registerRd ëª©ì ì§€ ë ˆì§€ìŠ¤í„°ë¥¼ ë¹„êµí•˜ì—¬ Hazard ê²€ì¶œë  ë•Œ "Forwarding"ì„ í•˜ëŠ” ì—­í• ì´ë‹¤.

ğŸ¯ ìœ ì‚¬í•˜ê²Œ, Hazard Detection Unitì˜ ê²½ìš°ì—ëŠ” ê¸°ì¡´ì˜ EX stageì—ì„œ ê²€ì¶œí•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œ ì •ë³´ ëŒ€ì‹ ì—, ID stageì—ì„œ IF/ID.registerRs, IF/ID.registerRt, ID/EX.registerRd, EX/MEM.registerRd ë¥¼ ë¹„êµí•˜ì—¬ Hazardë¥¼ ê²€ì¶œí•œë‹¤.
ê·¸ëŸ¬ë‚˜, Hazard Detection Unitë§Œìœ¼ë¡œ Forwardingì€ ìˆ˜í–‰í•˜ì§€ ì•Šìœ¼ë©°, Stallë§Œ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.
~~~

#### 2.4. ìœ„ '2.3.' ë¬¸ì œì˜ íšŒë¡œë¥¼ ê°–ê³  ìœ„ ì½”ë“œë¥¼ ì „ë¶€ ìˆ˜í–‰í•˜ë ¤ê³  í•œë‹¤. ì²« ì‚¬ì´í´ë¶€í„° ì¢…ë£Œë  ë•Œê¹Œì§€ ì‚¬ì´í´ë³„ë¡œ Stallingì„ í¬í•¨í•˜ì—¬ ëª…ë ¹ì–´ ìˆ˜í–‰ ìˆœì„œë¥¼ ì •ë¦¬í•˜ì—¬ ì„¤ëª…í•˜ì‹œì˜¤. 
~~~
âœ… Hazard Detection Unitë§Œ ìˆëŠ”ë°, Stallingë§Œ ê°€ëŠ¥í•˜ë‹¤.
ê°ê°ì˜ Hazardì— ëŒ€í•´ ëª‡ë²ˆì˜ bubbleì´ í•„ìš”í•œì§€ ìƒê°í•´ë³´ë©´ ëœë‹¤.
ìœ„ì˜ Hazard1ì„ í•´ê²°í•˜ë ¤ë©´ 2ê°œì˜ bubbleì´ í•„ìš”í•˜ë‹¤.
ìœ„ì˜ Hazard2ë¥¼ í•´ê²°í•˜ë ¤ë©´ 1ê°œì˜ bubbleì´ í•„ìš”í•˜ë‹¤.
ìœ„ì˜ Hazard3ë¥¼ í•´ê²°í•˜ë ¤ë©´ 2ê°œì˜ bubbleì´ í•„ìš”í•˜ë‹¤.

ğŸ¯ ì´ë¥¼ ê°ì•ˆí•˜ì—¬ ëª…ë ¹ì–´ ìˆ˜í–‰ ìˆœì„œë¥¼ ì •ë¦¬í•˜ìë©´,
1ë²ˆ ëª…ë ¹ì–´ ìˆ˜í–‰
bubble (Hazard : 1 - 2)
bubble (Hazard : 1 - 2)
2ë²ˆ ëª…ë ¹ì–´ ìˆ˜í–‰
3ë²ˆ ëª…ë ¹ì–´ ìˆ˜í–‰
bubble (Hazard : 2 - 4)
4ë²ˆ ëª…ë ¹ì–´ ìˆ˜í–‰
bubble (Hazard : 4 - 5)
bubble (Hazard : 4 - 5)
5ë²ˆ ëª…ë ¹ì–´ ìˆ˜í–‰
~~~

-----

### 3. ë‹¤ìŒì€ Control Hazardì— ëŒ€í•œ ì§ˆë¬¸ì´ë‹¤. 'ê·¸ë¦¼ 1'ì—ì„œ ì•„ë˜ ì½”ë“œê°€ ìˆ˜í–‰ëœë‹¤ê³  í•˜ì. ë§¨ ì•ì˜ ìˆ«ìëŠ” ê·¸ ëª…ë ¹ì–´ê°€ ì €ì¥ëœ ì£¼ì†Œì´ë‹¤. (SSU 17ë…„ë„ ê¸°ì¶œ)
![datapath_with_hazard_detection](../image_files/datapath_with_hazard_detection.png)  
ê·¸ë¦¼ 1. data hazardë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ forwarding unitê³¼ hazard detection unitì´ ì¶”ê°€ëœ íšŒë¡œë„

~~~
30: beq $1,  $3,  5       ...(1)
34: or  $8,  $5,  $2      ...(2)
38: add $9,  $3,  $4      ...(3)
42: and $6,  $2,  $7      ...(4)
46: add $14, $2,  $2      ...(5)
...
54: sw  $2, 4($3)         ...(6)
~~~

#### 3.1. 30ë²ˆì§€ beq ëª…ë ¹ì–´ì—ì„œ ì¡°ê±´ì´ ë§Œì¡±ë˜ì–´ branch í•´ì•¼í•˜ëŠ” ìƒí™©ì„ ê·¸ ëª…ë ¹ì–´ì˜ ì–´ëŠ ìˆ˜í–‰ë‹¨ê³„ì—ì„œ ì•Œê²Œ ë˜ëŠ”ê°€? ë‹µì„ ì“°ê³  ì´ìœ ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•˜ì‹œì˜¤. branchê°€ ë°œìƒí•˜ëŠ” ê²½ìš° flushingí•´ì•¼ í•˜ëŠ” ëª…ë ¹ì–´ê°€ ëª‡ ê°œì¸ì§€ ìœ„ì˜ ì½”ë“œì—ì„œ êµ¬ì²´ì ìœ¼ë¡œ ë°íˆì‹œì˜¤. Timing chartì™€ ê°™ì€ ê·¸ë¦¼ì„ ê·¸ë ¤ì„œ ë°œìƒí•˜ëŠ” ìƒí™©ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•˜ì‹œì˜¤.

~~~
âœ… beq ì¡°ê±´ë¶€ ëª…ë ¹ì–´ì—ì„œ $1ê³¼ $3ì´ ê°™ë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ëŠ” ê²ƒì€ EX stageì´ì§€ë§Œ,
âœ… ë¶„ê¸°í•  ìµœì¢… ì£¼ì†Œë¥¼ ê³„ì‚°í•˜ì—¬ ì•Œê²Œë˜ëŠ” ê²ƒì€ MEM stageì´ë‹¤.
âœ… ì´ MEM stage ë‹¤ìŒ clock cycleì—ì„œ ë¶„ê¸°í•  ì£¼ì†Œì˜ ëª…ë ¹ì–´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
ë¶„ê¸°í•  ìµœì¢… ì£¼ì†ŒëŠ” (30 + 4) + (5 * 4), 54ë²ˆì§€ì¸ 6ë²ˆ ëª…ë ¹ì–´ì´ë‹¤.
ğŸ¯ ì•„ë˜ì˜ Timing chartë¥¼ ì°¸ê³ í•˜ë©´ 3ê°œì˜ ëª…ë ¹ì–´ê°€ Flushë˜ì–´ ë²„ë ¤ì§„ë‹¤.
~~~
ğŸ¯ **Timing chart**:  
| PC        | CC1 | CC2 | CC3 | CC4 | CC5            | CC6 | CC7 | CC8 | CC9 |
|-----------|-----|-----|-----|-----|----------------|-----|-----|-----|-----|
| 30 (beq)  | IF  | ID  | EX  | MEM | WB             |     |     |     |     |
| 34 (or)   |     | IF  | ID  | EX  | âŒ**Flushed** | -   |     |     |     |
| 38 (add)  |     |     | IF  | ID  | âŒ**Flushed** | -   | -   |     |     |
| 42 (and)  |     |     |     | IF  | âŒ**Flushed** | -   | -   | -   |     |
| **58 (sw)** |   |     |     |     | IF             | ID  | EX  | MEM | WB  |

**beq ëª…ë ¹ì–´ì˜ ì‹¤í–‰ ê³¼ì •ì„ ì •ë¦¬í•˜ìë©´**,  
`beq $1, $3, offset` ëª…ë ¹ì–´ëŠ” `$1`ê³¼ `$3`ì˜ ê°’ì´ ê°™ì€ ê²½ìš°, `offset Ã— 4` ë°”ì´íŠ¸ ë§Œí¼ ì´ë™í•˜ì—¬ ë¶„ê¸°í•˜ëŠ” ëª…ë ¹ì–´ì„
* EX (Execute) ë‹¨ê³„ì—ì„œ:
    * ë‘ ë ˆì§€ìŠ¤í„° ê°’($1, $3)ì„ ë¹„êµí•˜ì—¬ ì¡°ê±´ì´ ë§Œì¡±í•˜ëŠ”ì§€ ê²°ì •í•¨.
    * ì¦‰, ë¶„ê¸° ì—¬ë¶€(branch taken or not taken)ëŠ” EX ë‹¨ê³„ì—ì„œ ê²°ì •ë¨.
* MEM (Memory) ë‹¨ê³„ì—ì„œ:
    * PC ê°’ì„ ì—…ë°ì´íŠ¸í•˜ê³ , ì‹¤ì œë¡œ ë¶„ê¸°í•  ìµœì¢… ì£¼ì†Œë¥¼ ê²°ì •.
    * ë¶„ê¸°ê°€ í™•ì •ë˜ë©´ íŒŒì´í”„ë¼ì¸ì„ Flushí•˜ê³ , ìƒˆë¡œìš´ ëª…ë ¹ì–´ë¥¼ ê°€ì ¸ì˜¤ê¸° ì‹œì‘.

#### 3.2. ì•„ë˜ 'ê·¸ë¦¼ 2'ëŠ” 'ê·¸ë¦¼ 1'ê³¼ ë¹„êµí•  ë•Œ íšŒë¡œê°€ ì¶”ê°€ë˜ì—ˆë‹¤. ì–´ë–¤ ë¶€ë¶„ì— ì–´ë–¤ ê¸°ëŠ¥ì´ ì¶”ê°€ëëŠ”ì§€ì™€ ì´ íšŒë¡œê°€ ì¶”ê°€ëœ ëª©ì ì„ ì„¤ëª…í•˜ì‹œì˜¤. (ìœ„ì— ì“°ì¸ ëª…ë ¹ì–´ëŠ” ë¬´ì‹œ)
![control_hazards_reducing_branch_delay_datapath_1](../image_files/control_hazards_reducing_branch_delay_datapath_1.png)
ê·¸ë¦¼ 2. ë³€ê²½ëœ íšŒë¡œë„

~~~
âœ… branchí•  ì£¼ì†Œë¥¼ ê³„ì‚°í•˜ëŠ” ìš”ì†Œ(adder)ë¥¼ ID stageì—ì„œ ê°€ëŠ¥í•˜ë„ë¡ ì˜®ê²¼ë‹¤.
âœ… ì£¼ì†Œê°€ ê°™ì€ì§€ ë¹„êµí•˜ëŠ” ìš”ì†Œ(comparator)ë¥¼ ID stageì—ì„œ ê°€ëŠ¥í•˜ë„ë¡ ì˜®ê²¼ë‹¤.
âœ… IF.flush Control Signalì´ ì¶”ê°€ë˜ì—ˆë‹¤.
âœ… ì¦‰, ë³€ê²½í•˜ê¸° ì „ì¸ 'ê·¸ë¦¼ 1'ì—ì„œëŠ” '3.1.' ë¬¸ì œì—ì„œ ë´¤ë“¯ì´ ë¶„ê¸° ì—¬ë¶€ëŠ” EX stageì—ì„œ ìˆ˜í–‰ë˜ê³ , ë¶„ê¸°í•  ìµœì¢… ì£¼ì†Œë¥¼ ê²°ì •í•˜ëŠ” ê²ƒì€ MEM Stageì—ì„œ ìˆ˜í–‰ëœë‹¤.

ğŸ¯ 'ê·¸ë¦¼ 2'ì—ì„œëŠ” ì£¼ì†Œ ê³„ì‚°ì„ ID stageì—ì„œ ê°€ëŠ¥í•˜ê²Œ í•˜ì—¬ branchí•  ì£¼ì†Œë¥¼ ë¯¸ë¦¬ ID stageì—ì„œ ê²°ì •í•˜ê²Œ ë¨ìœ¼ë¡œì¨ flush ê°œìˆ˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤. ID stageì—ì„œ branchí•  ì£¼ì†Œê°€ ê²°ì •ë˜ê¸° ë•Œë¬¸ì— ID stage ë‹¤ìŒ Clock Cycleì—ì„œ branchí•  ì£¼ì†Œì˜ ëª…ë ¹ì–´ê°€ ìˆ˜í–‰ëœë‹¤.
ğŸ¯ ì¦‰, ì´ íšŒë¡œê°€ ì¶”ê°€ëœ ëª©ì ì€ flush ê°œìˆ˜ë¥¼ ì¤„ì—¬ ì§€ì—°(delay)ë¥¼ ì¤„ì´ê¸° ìœ„í•¨ì´ë‹¤.
~~~

#### 3.3. 'ê·¸ë¦¼ 2' íšŒë¡œì—ì„œ ìœ„ì˜ ì½”ë“œë¥¼ ìˆ˜í–‰í•œë‹¤ê³  í•  ë•Œ ìˆ˜í–‰ê³¼ì •ì„ Timing chartì™€ ê°™ì€ í‘œë¥¼ ê·¸ë ¤ì„œ ë°œìƒí•˜ëŠ” ìƒí™©ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•˜ì‹œì˜¤. branchê°€ ë°œìƒí•˜ëŠ” ê²½ìš° Flushing í•´ì•¼ í•˜ëŠ” ëª…ë ¹ì–´ê°€ ëª‡ ê°œì¸ì§€ ìœ„ì˜ ì½”ë“œì—ì„œ êµ¬ì²´ì ìœ¼ë¡œ ë°íˆì‹œì˜¤.
ğŸ¯ ì•„ë˜ì˜ Timing chartë¥¼ ì°¸ê³ í•˜ë©´ 1ê°œì˜ ëª…ë ¹ì–´ê°€ Flushë˜ì–´ ë²„ë ¤ì§„ë‹¤.  
ğŸ¯ **Timing chart**:  
| PC        | CC1 | CC2 | CC3           | CC4 | CC5 | CC6 | CC7 |
|-----------|-----|-----|---------------|-----|-----|-----|-----|
| 30 (beq)  | IF  | ID  | EX            | MEM | WB  |     |     |
| 34 (or)   |     | IF  | âŒ**Flushed** | -   | -   | -   |     |
| 58 (sw)   |     |     | IF            | ID  | EX  | MEM  | WB |

-----

### 4. ë‹¤ìŒ ì½”ë“œëŠ” 5ë‹¨ê³„ íŒŒì´í”„ë¼ì¸ êµ¬ì¡°ì˜ RISC-V CPUì—ì„œ ì‹¤í–‰ëœë‹¤. ë¶„ê¸° ì˜ˆì¸¡ ë°©ì‹ì€ ì •ì (Static) ë°©ì‹ì´ë©°, í•­ìƒ "ë¶„ê¸° ì•ˆ í•¨(Not Taken)"ìœ¼ë¡œ ì˜ˆì¸¡í•œë‹¤ê³  ê°€ì •í•œë‹¤. ì¦‰, ë¶„ê¸° ëª…ë ¹ì´ ë‚˜ì˜¤ë©´ í•­ìƒ ë‹¤ìŒ PC = PC + 4ë¡œ ì˜ˆì¸¡í•œë‹¤. ë¶„ê¸° ê²°ê³¼ëŠ” EXE ë‹¨ê³„(ALUì—ì„œ)ì— ê°€ì„œì•¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. (POSTECH 22-23 First)
~~~
    LW x9, 0x0(x8)
    BEQ x9, x10, END    //It turns out the values of x9 and x10 differ
    ADD x9, x9, x9
END:ADD x10, x10, x10
~~~

âœ… Not Takenìœ¼ë¡œ ì˜ˆì¸¡í•œë‹¤ê³  ê°€ì •í•œ ìƒíƒœì—ì„œ, x9ê³¼ x10ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— Branch Predictionì— ì„±ê³µí•˜ì—¬ Flushë¥¼ í•˜ì§€ ì•ŠìŒ  
âœ… ë§Œì•½, Branch Predictionì— ì‹¤íŒ¨í•œë‹¤ë©´, BEQì˜ EXì—ì„œ ë¶„ê¸° ì—¬ë¶€ê°€ íŒë³„ë˜ëŠ” ì‹œì ê¹Œì§€ ì¸ì¶œëœ ëª…ë ¹ì–´ë“¤ì´ Flush  

#### 4.1. data forwardingì´ ì „í˜€ êµ¬í˜„ë˜ì–´ ìˆì§€ ì•Šì€ ê²½ìš°(ì¦‰, ë ˆì§€ìŠ¤í„° íŒŒì¼ ë‚´ë¶€ í¬ì›Œë”©ë„ ì—†ìŒ) ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ëª‡ ì‚¬ì´í´ì´ ì†Œìš”ë˜ëŠ”ê°€?
~~~
5 stageëŠ” ìˆœì„œëŒ€ë¡œ, IF -> ID -> EX -> MEM -> WB

LWì—ì„œ ê°’ì„ ê°€ì ¸ì™€ì•¼ í•˜ëŠ” Load-Use Data Hazard ë°œìƒì„

LWì—ì„œ x9ì˜ ê°’ì€ WB ë‹¨ê³„ë¥¼ ê±°ì³ì•¼ ì–»ì–´ì§ (WBë¥¼ í†µí•´ ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•˜ì—¬ ì½ì€ ê°’ì„ x9ì— ì €ì¥)
ê·¸ëŸ°ë° BEQëŠ” ID ë‹¨ê³„ì—ì„œ x9ì˜ ê°’ì„ ì–»ì–´ì•¼ í•¨
LWì˜ WB ë‹¨ê³„ ë‹¤ìŒì— BEQì˜ ID ë‹¨ê³„ê°€ ìˆ˜í–‰ë˜ì–´ì•¼ í•˜ë¯€ë¡œ,
ì•„ë˜ì™€ ê°™ì´ 3ë²ˆì˜ Bubbleì´ í•„ìš”í•¨
 IF ID EX MEM WB (LW)
    -  -  -   -  - (Bubble)
       -  -   -  -  - (Bubble)
          -   -  -  -   - (Bubble)
              IF ID EX MEM WB (BEQ)
                 IF ID EX  MEM WB (ADD)
                    IF ID  EX  MEM WB (ADD)

ğŸ¯ ë”°ë¼ì„œ, 11 cycles ì†Œìš”
~~~

#### 4.2. ëª¨ë“  ê°€ëŠ¥í•œ ë°ì´í„° í¬ì›Œë”©ì´ êµ¬í˜„ëœ ê²½ìš°, ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ëª‡ ì‚¬ì´í´ì´ ì†Œìš”ë˜ëŠ”ê°€?
~~~
Load-Use Data Hazardì„

BEQì˜ EX ë‹¨ê³„ì—ì„œ ë¹„êµê°€ ì´ë£¨ì–´ì§€ë¯€ë¡œ, 
forwardingì„ ë„ì…í•  ê²½ìš°ì—ëŠ” ë¹„êµ ì—°ì‚° ë•Œ x9 ê°’ì„ ê°€ì ¸ì˜¤ë©´ ë¨!
ì¦‰, IDì—ì„œëŠ” x9 ê°’ìœ¼ë¡œ outdated ë°ì´í„°ë¥¼ ì½ì–´ë„ EXì—ì„œ forwardingì„ í†µí•´ ìµœì‹  ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ê²ƒ

Load-Use data hazardì´ë¯€ë¡œ, x9ëŠ” ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•´ì•¼ë§Œ ì–»ì„ ìˆ˜ ìˆê¸°ì—
MEM ì´í›„ì— ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ
ë”°ë¼ì„œ forwardingì„ í•˜ë”ë¼ë„ í•œë²ˆì˜ stallì´ ë°œìƒ

 IF ID EX MEM WB (LW)
    -  -  -   -   -   - (Bubble)
       IF ID  EX  MEM WB (BEQ)
          IF  ID  EX  MEM WB (ADD)
              IF  ID  EX  MEM WB (ADD)

ğŸ¯ ë ë¼ì„œ, 9 cycles ì†Œìš” (ë§ˆì§€ë§‰ ADDì˜ WB ë‹¨ê³„ê¹Œì§€)
~~~


## ğŸ’ª Branch Prediction ì‹¬ì¸µ ë¬¸ì œ

### 1. ë‹¤ìŒ C í”„ë¡œê·¸ë¨ì€ ì¤‘ì²© ë£¨í”„ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤. Outer LoopëŠ” 10ë²ˆ ë°˜ë³µë˜ê³ , Inner LoopëŠ” 20ë²ˆ ë°˜ë³µëœë‹¤:   (POSTECH 24-25 Second)
~~~
for (i = 0; i < 10; i++) {
    for (j = 0; j < 20; j++) {
        // do something;
    }
}
~~~
#### 1.1. ê° ë£¨í”„ì˜ ëì— ë¶„ê¸° ëª…ë ¹ì–´ê°€ í•˜ë‚˜ì”© ì¡´ì¬í•˜ê³ , ê·¸ ì™¸ì—ëŠ” ì½”ë“œì— ë‹¤ë¥¸ ë¶„ê¸° ëª…ë ¹ì–´ê°€ ì—†ë‹¤ê³  ê°€ì •í•  ë•Œ, ë‹¤ìŒ ë¶„ê¸° ì˜ˆì¸¡ê¸°(branch predictor)ë“¤ì˜ ì •í™•ë„ë¥¼ ë¹„êµí•˜ê³ , ì£¼ì–´ì§„ í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ ë™ì‘ê³¼ ê´€ë ¨ì§€ì–´ ê·¸ ì´ìœ ë¥¼ ì„¤ëª…í•˜ì‹œì˜¤.
~~~
(1) Static predictor (always predicts â€œtakenâ€)
(2) One-bit predictor
(3) Two-bit predictor using a saturating counter
~~~

âœ… Takenê³¼ Not Takenì˜ ê°œë…:
| ìš©ì–´        | ëœ»                                | ì‹¤í–‰ íë¦„       |
|-------------|-----------------------------------|------------------|
| **Taken**   | ë¶„ê¸°ê°€ ì‹¤í–‰ë˜ì–´ **ì í”„í•¨**         | ë£¨í”„ ë°˜ë³µ ê³„ì†    |
| **Not Taken** | ë¶„ê¸°ê°€ ì‹¤í–‰ë˜ì§€ ì•Šê³  **ì§ì§„í•¨**     | ë£¨í”„ ì¢…ë£Œ, ifë¬¸ í†µê³¼ ë“± |

âœ… Inner Loopì™€ Outer Loopì˜ Taken/Not Taken íšŸìˆ˜ ë¶„ì„:
* Inner Loop:
    * í•œë²ˆì˜ Outer Loopë‹¹ 20ë²ˆ ë°˜ë³µë˜ì–´, 20ê°œì˜ ë¶„ê¸° ë°œìƒ
    * ì‹¤ì œ ë¶„ê¸° ê²°ê³¼: 19ë²ˆ Taken + 1ë²ˆ Not Taken
    * Outer Loopê°€ 10ë²ˆ ë°˜ë³µë˜ë¯€ë¡œ, 190ë²ˆ Taken + 10ë²ˆ Not Taken
* Outer Loop:
    * 9ë²ˆ Taken + 1ë²ˆ Not Taken

1ï¸âƒ£ **Static Predictor** - í•­ìƒ Takenìœ¼ë¡œ ì˜ˆì¸¡
* Takenì¼ ë•ŒëŠ” ë§ê³ , Not Takenì¼ ë•ŒëŠ” í‹€ë¦¼
* Inner Loopì˜ ì •í™•ë„: `190/200` = 95%
* Outer Loopì˜ ì •í™•ë„: `9/10` = 90%
* ğŸ¯ ì „ì²´ í‰ê·  ì •í™•ë„: `199/210` = 94.7%

2ï¸âƒ£ **One-bit Predictor** - ìµœê·¼ ë¶„ê¸° ê²°ê³¼ í•˜ë‚˜ë§Œ ê¸°ì–µ
* Loopì˜ ë§ˆì§€ë§‰ Not Takenì´ ë°œìƒí•œ í›„, ë‹¤ìŒ Loopì˜ ì²« ë¶„ê¸°ë¥¼ ì˜ëª» ì˜ˆì¸¡
* Outer Loopì— ì˜í•´ ë‹¤ìŒ Inner Loopê°€ 10ë²ˆ ë°˜ë³µë  ë•Œë§ˆë‹¤, 2ë²ˆ ì—°ì†ìœ¼ë¡œ í‹€ë¦¼
    ~~~
    i=0, j=0    Taken
    i=0, j=1    Taken
    ...
    i=0, j=19   Taken
    i=0, j=20   Not Taken(ë£¨í”„íƒˆì¶œ) -> í‹€ë¦¼
    i=1, j=0    Taken -> í‹€ë¦¼
    ~~~
* Inner LoopëŠ” 10ë²ˆ ë°˜ë³µë˜ë¯€ë¡œ, 10 x 2 = 20 ë²ˆ í‹€ë¦¼
* Inner Loopì˜ ì •í™•ë„: `180/200` = 90%
* Outer Loopì˜ ì •í™•ë„: `8/10` = 80%
* ğŸ¯ ì „ì²´ í‰ê·  ì •í™•ë„: `188/210` = 89.6%

3ï¸âƒ£ **Two-bit Predictor** - ì˜ˆì¸¡ ìƒíƒœë¥¼ 4ë‹¨ê³„(Strong/Weak Taken, Strong/Weak Not Taken)ë¡œ ê¸°ì–µ
* í•œ ë²ˆ í‹€ë¦°ë‹¤ê³  ì˜ˆì¸¡ì´ ë°”ë€Œì§€ ì•ŠìŒ
* Static Predictorì²˜ëŸ¼ Loop íƒˆì¶œí•˜ëŠ” Not Takenì—ì„œ 1ë²ˆì”© í‹€ë¦¼
* Inner Loopì˜ ì •í™•ë„: `190/200` = 95%
* Outer Loopì˜ ì •í™•ë„: `9/10` = 90%
* ğŸ¯ ì „ì²´ í‰ê·  ì •í™•ë„: `199/210` = 94.7%

-----

### 2. ë‹¤ìŒê³¼ ê°™ì€ branch ì—°ì‚°ì˜ ê²°ê³¼ê°€ ì£¼ì–´ì¡Œë‹¤ë©´, ê¸°ë³¸ì ì¸ two-bit saturating counterë¥¼ ì´ìš©í•œ branch predictorë¥¼ ì‚¬ìš©í•  ë•Œ ì˜ˆì¸¡ ê²°ê³¼ì˜ ì •í™•ë„ë¥¼ êµ¬í•˜ì‹œì˜¤. ì´ë•Œ, counterëŠ” 2â€™b10ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆê³  2â€™b00ì€ strongly not-taken, 2â€™b11ì€ strongly takenì„ ì˜ë¯¸í•œë‹¤. (POSTECH 24-25 First)
~~~
Branch ì—°ì‚° ê²°ê³¼: T, T, T, N, N, N, T, T, T, N, N
~~~

âœ… 2-bit Saturating Counter Predictorì˜ ìƒíƒœí‘œ:  
| ìƒíƒœ ê°’ | ìƒíƒœ ì´ë¦„         | ì˜ˆì¸¡       | ì‹¤ì œ ê²°ê³¼: Taken â†’ ë‹¤ìŒ ìƒíƒœ | ì‹¤ì œ ê²°ê³¼: Not Taken â†’ ë‹¤ìŒ ìƒíƒœ |
|----------|------------------|------------|------------------------------|----------------------------------|
| 11       | Strong Taken     | Taken      | ìœ ì§€ (11)                    | â†’ Weak Taken (10)               |
| 10       | Weak Taken       | Taken      | â†’ Strong Taken (11)          | â†’ Weak Not Taken (01)           |
| 01       | Weak Not Taken   | Not Taken  | â†’ Weak Taken (10)            | â†’ Strong Not Taken (00)         |
| 00       | Strong Not Taken | Not Taken  | â†’ Weak Not Taken (01)        | ìœ ì§€ (00)                       |


ì²˜ìŒì— ì´ˆê¸°í™”ë˜ì—ˆì„ ë•Œ: `10` (Weak Taken)  

| ìˆœì„œ | ì‹¤ì œ ê²°ê³¼ | í˜„ì¬ ìƒíƒœ        | ë‹¤ìŒ ìƒíƒœ           | ì˜ˆì¸¡ ì„±ê³µ ì—¬ë¶€        |
|------|------------|------------------|----------------------|-----------------|
| 1    | T          | Weak Taken (10)  | Strong Taken (11)   | âœ… ì„±ê³µ          |
| 2    | T          | Strong Taken (11)| Strong Taken (11)   | âœ… ì„±ê³µ          |
| 3    | T          | Strong Taken (11)| Strong Taken (11)   | âœ… ì„±ê³µ          |
| 4    | N          | Strong Taken (11)| Weak Taken (10)     | âŒ ì‹¤íŒ¨          |
| 5    | N          | Weak Taken (10)  | Weak Not Taken (01) | âŒ ì‹¤íŒ¨          |
| 6    | N          | Weak Not Taken(01)| Strong Not Taken (00)| âœ… ì„±ê³µ        |
| 7    | T          | Strong Not Taken(00)| Weak Not Taken (01)| âŒ ì‹¤íŒ¨        |
| 8    | T          | Weak Not Taken(01)| Weak Taken (10)     | âŒ ì‹¤íŒ¨         |
| 9    | T          | Weak Taken (10)  | Strong Taken (11)   | âœ… ì„±ê³µ          |
|10    | N          | Strong Taken (11)| Weak Taken (10)     | âŒ ì‹¤íŒ¨          |
|11    | N          | Weak Taken (10)  | Weak Not Taken (01) | âŒ ì‹¤íŒ¨          |

ğŸ¯ ë”°ë¼ì„œ, ì˜ˆì¸¡ ê²°ê³¼ì˜ ì •í™•ë„ëŠ” `5/11` = ì•½ 45.4%  